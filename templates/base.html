
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Task Manager{% endblock %}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #333;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.95);
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
            position: relative;
            overflow: hidden;
        }
        
        /* Для страниц логина и регистрации - маленький размер */
        .container.login-form {
            max-width: 400px;
            width: 90%;
        }
        
        /* Для панели пользователя - на всю страницу */
        .container.dashboard {
            max-width: 95vw;
            width: 95%;
            min-height: 90vh;
            margin: 2.5vh auto;
        }
        
        h1, h2 {
            text-align: center;
            margin-bottom: 1.5rem;
            color: #4a5568;
            font-size: 2rem;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            color: #4a5568;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
        }
        
        .form-control:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .submit-btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
            margin-bottom: 1rem;
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .flash-messages {
            margin-bottom: 1rem;
        }
        
        .flash-message {
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
            font-size: 0.9rem;
        }
        
        .links {
            text-align: center;
        }
        
        .links a {
            color: #667eea;
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.3s ease;
        }
        
        .links a:hover {
            color: #764ba2;
        }

        /* Cat animation styles for login page */
        .cat-animation {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            z-index: 10;
        }
        
        .cat-svg {
            width: 100%;
            height: 100%;
            animation: catFloat 3s infinite ease-in-out;
        }

        @keyframes catFloat {
            0%, 100% {
                transform: translateY(-5px) rotate(2deg);
            }
            50% {
                transform: translateY(5px) rotate(-2deg);
            }
        }

        /* Floating paw prints */
        .paw-print {
            position: absolute;
            width: 15px;
            height: 15px;
            opacity: 0.3;
            animation: pawFloat 4s infinite ease-in-out;
        }

        .paw-print:nth-child(1) {
            top: 10%;
            left: 10%;
            animation-delay: 0s;
        }

        .paw-print:nth-child(2) {
            top: 20%;
            right: 15%;
            animation-delay: 1s;
        }

        .paw-print:nth-child(3) {
            bottom: 30%;
            left: 20%;
            animation-delay: 2s;
        }

        .paw-print:nth-child(4) {
            bottom: 15%;
            right: 25%;
            animation-delay: 3s;
        }

        @keyframes pawFloat {
            0%, 100% {
                transform: translateY(0px) rotate(0deg);
                opacity: 0.1;
            }
            50% {
                transform: translateY(-20px) rotate(180deg);
                opacity: 0.4;
            }
        }

        /* Top Navigation Bar */
        .top-navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            padding: 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            border-bottom: 3px solid #3498db;
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-left {
            display: flex;
            align-items: center;
            gap: 25px;
        }

        .app-name {
            font-size: 18px;
            font-weight: 600;
            color: #ecf0f1;
            letter-spacing: 0.5px;
        }

        .user-info {
            font-size: 14px;
            color: #bdc3c7;
            padding: 6px 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .nav-right {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .nav-link {
            padding: 8px 20px;
            color: #ecf0f1;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            border-radius: 6px;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }

        .nav-link:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .nav-link.logout {
            background: #e74c3c;
            border-color: #c0392b;
        }

        .nav-link.logout:hover {
            background: #c0392b;
        }

        /* Adjust body padding when navbar is present */
        body.has-navbar {
            padding-top: 70px;
        }

        .container.dashboard {
            margin-top: 20px;
        }
    </style>
</head>
<body class="{% if 'username' in session %}has-navbar{% endif %}">
    {% if 'username' in session %}
    <nav class="top-navbar">
        <div class="nav-container">
            <div class="nav-left">
                <span class="app-name">Система управления задачами</span>
                <span class="user-info">Пользователь: {{ session['username'] }}</span>
            </div>
            <div class="nav-right">
                <a href="{{ url_for('profile') }}" class="nav-link">Мой профиль</a>
                <a href="{{ url_for('admin_panel') }}" class="nav-link">Админ панель</a>
                <a href="{{ url_for('logout') }}" class="nav-link logout">Выйти из системы</a>
            </div>
        </div>
    </nav>
    {% endif %}
    
    <div class="container {% if request.endpoint in ['index', 'profile'] %}dashboard{% else %}login-form{% endif %}"
        {% if request.endpoint == 'login' %}
            <!-- Cat animation only on login page -->
            <div class="cat-animation">
                <svg class="cat-svg" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M5 62.5237C4.6 72.9237 1.5 87.1903 0 93.0237C3.5 97.5237 13.5 94.5237 16 96.0237C18.5 97.5237 21 99.0237 25.5 99.5237C30 100.024 39.5 92.0237 50 95.5237C58.4 98.3237 65.8333 97.357 68.5 96.5237C69.5 90.6903 70 77.3237 64 70.5237C56.5 62.0237 49.5 45.5237 47 33.5237C44.5 21.5237 43.5 1.02365 39.5 0.523651C35.5 0.0236511 33.5 7.52365 25 8.52365C16.5 9.52365 16.5 0.523656 15 0.0236556C13.5 -0.476344 11 7.02366 9 15.5237C7 24.0237 5.5 49.5237 5 62.5237Z" fill="url(#paint0_linear_32_9)" stroke="#333" stroke-width="0.5"/>
                    <path d="M18 27.5237C15.2 28.3237 14.5 24.857 14.5 23.0237C14.5 19.5237 16.5 18.5237 19 18.5237C21.5 18.5237 22 21.0237 22 22.5237C22 24.0237 21.5 26.5237 18 27.5237Z" fill="#202020"/>
                    <path d="M30.5 28.0237C28.5 28.0237 27 25.0237 27 23.0237C27 19.2206 29.5 18.5237 32 18.0237C34.5 17.5237 36 19.5237 36 23.0237C36 26.5237 33.0495 28.0237 30.5 28.0237Z" fill="#202020"/>
                    <path d="M19.4999 94.5001C17.8999 92.5001 14.1666 92.0001 12.4999 92.0001C7.99989 91.1783 19.4999 63.5001 16.9999 70.0001C14.4999 76.5001 21.4999 97.0001 19.4999 94.5001Z" fill="url(#paint1_linear_32_9)"/>
                    <path d="M50 93.0001C45.2606 92.0524 40.5 93.5 38 93.0001C43 86 35.5 63.0001 41 70.0001C44.9074 74.9732 52.5 93.5 50 93.0001Z" fill="url(#paint2_linear_32_9)"/>
                    <defs>
                        <linearGradient id="paint0_linear_32_9" x1="34.5556" y1="0" x2="34.5556" y2="99.5462" gradientUnits="userSpaceOnUse">
                            <stop stop-color="#f0f0f0"/>
                            <stop offset="0.3" stop-color="#e0e0e0"/>
                            <stop offset="1" stop-color="#b0b0b0"/>
                        </linearGradient>
                        <linearGradient id="paint1_linear_32_9" x1="30.9695" y1="68.69" x2="30.9695" y2="94.7103" gradientUnits="userSpaceOnUse">
                            <stop stop-color="#808080"/>
                            <stop offset="1" stop-color="#BABABA" stop-opacity="0"/>
                        </linearGradient>
                        <linearGradient id="paint2_linear_32_9" x1="30.9695" y1="68.69" x2="30.9695" y2="94.7103" gradientUnits="userSpaceOnUse">
                            <stop stop-color="#808080"/>
                            <stop offset="1" stop-color="#BABABA" stop-opacity="0"/>
                        </linearGradient>
                    </defs>
                </svg>
            </div>
            
            <!-- Floating paw prints -->
            <div class="paw-print">🐾</div>
            <div class="paw-print">🐾</div>
            <div class="paw-print">🐾</div>
            <div class="paw-print">🐾</div>
        {% endif %}
        
        {% block content %}{% endblock %}
    </div>
</body>
</html>
